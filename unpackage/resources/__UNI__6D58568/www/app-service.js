if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const o=this.constructor;return this.then((n=>o.resolve(e()).then((()=>n))),(n=>o.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function o(e,o,...n){uni.__log__?uni.__log__(e,o,...n):console[e].apply(console,[...n,o])}const n=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],t=(e,o)=>{const n=e.__vccOpts||e;for(const[t,c]of o)n[t]=c;return n};const c=t({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:n}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(o,n,t,c,l,s){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(s.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+t.type,t.customPrefix,t.customPrefix?t.type:""]]),onClick:n[0]||(n[0]=(...e)=>s._onClick&&s._onClick(...e))},[e.renderSlot(o.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]),l={name:"EditDialog",props:{show:{type:Boolean,default:!1},value:{type:String,default:""}},data:()=>({inputValue:""}),watch:{show(e){e&&(this.inputValue=this.value)}},methods:{handleMaskClick(){this.$emit("update:show",!1)},handleCancel(){this.$emit("update:show",!1)},handleConfirm(){this.inputValue.trim()&&(this.$emit("confirm",this.inputValue),this.$emit("update:show",!1))}}};__definePage("pages/index/index",t({components:{EditDialog:t(l,[["render",function(o,n,t,c,l,s){return t.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"dialog-mask",onClick:n[4]||(n[4]=(...e)=>s.handleMaskClick&&s.handleMaskClick(...e))},[e.createElementVNode("view",{class:"dialog-content",onClick:n[3]||(n[3]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"dialog-header"},[e.createElementVNode("text",{class:"dialog-title"},"修改取件码")]),e.createElementVNode("view",{class:"dialog-body"},[e.withDirectives(e.createElementVNode("input",{class:"dialog-input",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>l.inputValue=e),placeholder:"请输入新的取件码"},null,512),[[e.vModelText,l.inputValue]])]),e.createElementVNode("view",{class:"dialog-footer"},[e.createElementVNode("text",{class:"dialog-btn cancel",onClick:n[1]||(n[1]=(...e)=>s.handleCancel&&s.handleCancel(...e))},"取消"),e.createElementVNode("text",{class:"dialog-btn confirm",onClick:n[2]||(n[2]=(...e)=>s.handleConfirm&&s.handleConfirm(...e))},"确定")])])])):e.createCommentVNode("",!0)}],["__scopeId","data-v-6b23531a"]])},data:()=>({newCode:"",packageCodes:[],showEditDialog:!1,editingItem:null,editingCode:""}),computed:{today(){const e=new Date;return`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`},groupedCodes(){const e={};return this.packageCodes.forEach((o=>{const n=new Date(o.date),t=`${n.getFullYear()}年${n.getMonth()+1}月${n.getDate()}日`;e[t]||(e[t]=[]),e[t].push(o)})),e}},created(){try{const e=uni.getStorageSync("packageCodes");e&&(this.packageCodes=JSON.parse(e))}catch(e){o("error","at pages/index/index.vue:117","读取缓存失败:",e)}},methods:{saveToStorage(){try{uni.setStorageSync("packageCodes",JSON.stringify(this.packageCodes))}catch(e){o("error","at pages/index/index.vue:125","保存缓存失败:",e)}},addCode(){this.newCode&&(this.packageCodes.unshift({code:this.newCode.replace(/\s/g,""),date:(new Date).toLocaleString(),isPicked:!1}),this.saveToStorage(),this.newCode="")},editCode(e){this.editingItem=e,this.editingCode=e.code,this.showEditDialog=!0},handleEditConfirm(e){this.editingItem&&(this.editingItem.code=e.replace(/\s/g,""),this.saveToStorage()),this.editingItem=null,this.editingCode=""},deleteCode(e){uni.showModal({title:"确认删除",content:"是否删除该取件码?",success:o=>{if(o.confirm){const o=this.packageCodes.indexOf(e);this.packageCodes.splice(o,1),this.saveToStorage()}}})},togglePicked(e){e.isPicked=!e.isPicked,this.saveToStorage()},getPendingCount:e=>e.filter((e=>!e.isPicked)).length,getTextBeforeNumber:e=>e.split(/\d+/)[0],getNumber(e){const o=e.match(/\d+/);return o?o[0]:""},getTextAfterNumber(e){const o=e.split(/\d+/);return o.length>1?o[1]:""},formatCode:e=>/^\d{8}$/.test(e)?e.replace(/(\d{4})(?=\d)/g,"$1 "):e}},[["render",function(o,n,t,l,s,i){const a=(d=e.resolveDynamicComponent("uni-icons"),u=c,"string"==typeof d?u:d);var d,u;const f=e.resolveComponent("edit-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"page-wrapper"},[e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"title"},"取件码工具"),e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"input-area"},[e.withDirectives(e.createElementVNode("input",{class:"code-input","onUpdate:modelValue":n[0]||(n[0]=e=>s.newCode=e),type:"number",placeholder:"请输入取件码"},null,512),[[e.vModelText,s.newCode]]),e.createElementVNode("button",{class:"add-btn",onClick:n[1]||(n[1]=(...e)=>i.addCode&&i.addCode(...e))},"添加")])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.groupedCodes,((o,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:"card code-card"},[e.createElementVNode("view",{class:"card-header"},[e.createElementVNode("text",{class:"card-title"},e.toDisplayString(n),1),e.createElementVNode("text",{class:"card-extra"},[e.createElementVNode("text",{class:"pending-count"},e.toDisplayString(i.getPendingCount(o)),1),e.createElementVNode("text",null,"个待取件")])]),e.createElementVNode("view",{class:"code-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o,((o,n)=>(e.openBlock(),e.createElementBlock("view",{class:"code-item",key:n},[e.createElementVNode("checkbox",{class:"checkbox",checked:o.isPicked,onClick:e=>i.togglePicked(o)},null,8,["checked","onClick"]),e.createElementVNode("text",{class:e.normalizeClass(["code-text",{picked:o.isPicked}])},e.toDisplayString(i.formatCode(o.code)),3),e.createElementVNode("view",{class:"actions"},[e.createVNode(a,{type:"compose",size:"20",onClick:e=>i.editCode(o)},null,8,["onClick"]),e.createVNode(a,{type:"trash",size:"20",color:"#ff5a5f",onClick:e=>i.deleteCode(o)},null,8,["onClick"])])])))),128))])])))),128))])]),e.createVNode(f,{show:s.showEditDialog,"onUpdate:show":n[2]||(n[2]=e=>s.showEditDialog=e),value:s.editingCode,onConfirm:i.handleEditConfirm},null,8,["show","value","onConfirm"])],64)}]]));const s={onLaunch:function(){o("warn","at App.vue:4","当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！"),o("log","at App.vue:5","App Launch")},onShow:function(){o("log","at App.vue:8","App Show")},onHide:function(){o("log","at App.vue:11","App Hide")}};const{app:i,Vuex:a,Pinia:d}={app:e.createVueApp(s)};uni.Vuex=a,uni.Pinia=d,i.provide("__globalStyles",__uniConfig.styles),i._component.mpType="app",i._component.render=()=>{},i.mount("#app")}(Vue);
