if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function a(e,t){return"string"==typeof e?t:e}const i=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],s=(e,t)=>{const a=e.__vccOpts||e;for(const[i,s]of t)a[i]=s;return a};const n=s({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:i}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,a,i,s,n,o){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(o.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+i.type,i.customPrefix,i.customPrefix?i.type:""]]),onClick:a[0]||(a[0]=(...e)=>o._onClick&&o._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-5610c8db"]]);const o=s({name:"EditDialog",props:{show:{type:Boolean,default:!1},value:{type:String,default:""}},data:()=>({inputValue:""}),watch:{show(e){e&&(this.inputValue=this.value)}},methods:{handleMaskClick(){this.$emit("update:show",!1)},handleCancel(){this.$emit("update:show",!1)},handleConfirm(){this.inputValue.trim()&&(this.$emit("confirm",this.inputValue),this.$emit("update:show",!1))}}},[["render",function(t,a,i,s,n,o){return i.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"dialog-mask",onClick:a[4]||(a[4]=(...e)=>o.handleMaskClick&&o.handleMaskClick(...e))},[e.createElementVNode("view",{class:"dialog-content",onClick:a[3]||(a[3]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"dialog-header"},[e.createElementVNode("text",{class:"dialog-title"},"修改取件码")]),e.createElementVNode("view",{class:"dialog-body"},[e.withDirectives(e.createElementVNode("input",{class:"dialog-input",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>n.inputValue=e),placeholder:"请输入新的取件码"},null,512),[[e.vModelText,n.inputValue]])]),e.createElementVNode("view",{class:"dialog-footer"},[e.createElementVNode("text",{class:"dialog-btn cancel",onClick:a[1]||(a[1]=(...e)=>o.handleCancel&&o.handleCancel(...e))},"取消"),e.createElementVNode("text",{class:"dialog-btn confirm",onClick:a[2]||(a[2]=(...e)=>o.handleConfirm&&o.handleConfirm(...e))},"确定")])])])):e.createCommentVNode("",!0)}],["__scopeId","data-v-6b23531a"]]);var l;l="iOS"==plus.os.name;const r={judgeIosPermission:function(e){return"location"==e?(i=plus.ios.import("CLLocationManager"),t("log","at js_sdk/wa-permission/permission.js:48","定位权限开启："+(a=2!=i.authorizationStatus())),plus.ios.deleteObject(i),a):"camera"==e?function(){var e=!1,a=plus.ios.import("AVCaptureDevice"),i=a.authorizationStatusForMediaType("vide");return t("log","at js_sdk/wa-permission/permission.js:86","authStatus:"+i),3==i?(e=!0,t("log","at js_sdk/wa-permission/permission.js:89","相机权限已经开启")):t("log","at js_sdk/wa-permission/permission.js:91","相机权限没有开启"),plus.ios.deleteObject(a),e}():"photoLibrary"==e?function(){var e=!1,a=plus.ios.import("PHPhotoLibrary"),i=a.authorizationStatus();return t("log","at js_sdk/wa-permission/permission.js:102","authStatus:"+i),3==i?(e=!0,t("log","at js_sdk/wa-permission/permission.js:105","相册权限已经开启")):t("log","at js_sdk/wa-permission/permission.js:107","相册权限没有开启"),plus.ios.deleteObject(a),e}():"record"==e?function(){var e=!1,a=plus.ios.import("AVAudioSession"),i=a.sharedInstance().recordPermission();return t("log","at js_sdk/wa-permission/permission.js:70","permissionStatus:"+i),1684369017==i||1970168948==i?t("log","at js_sdk/wa-permission/permission.js:72","麦克风权限没有开启"):(e=!0,t("log","at js_sdk/wa-permission/permission.js:75","麦克风权限已经开启")),plus.ios.deleteObject(a),e}():"push"==e?function(){var e=!1,a=plus.ios.import("UIApplication"),i=a.sharedApplication(),s=0;if(i.currentUserNotificationSettings){var n=i.currentUserNotificationSettings();t("log","at js_sdk/wa-permission/permission.js:19","enabledTypes1:"+(s=n.plusGetAttribute("types"))),0==s?t("log","at js_sdk/wa-permission/permission.js:21","推送权限没有开启"):(e=!0,t("log","at js_sdk/wa-permission/permission.js:24","已经开启推送功能!")),plus.ios.deleteObject(n)}else 0==(s=i.enabledRemoteNotificationTypes())?t("log","at js_sdk/wa-permission/permission.js:30","推送权限没有开启!"):(e=!0,t("log","at js_sdk/wa-permission/permission.js:33","已经开启推送功能!")),t("log","at js_sdk/wa-permission/permission.js:35","enabledTypes2:"+s);return plus.ios.deleteObject(i),plus.ios.deleteObject(a),e}():"contact"==e?function(){var e=!1,a=plus.ios.import("CNContactStore");return 3==a.authorizationStatusForEntityType(0)?(e=!0,t("log","at js_sdk/wa-permission/permission.js:120","通讯录权限已经开启")):t("log","at js_sdk/wa-permission/permission.js:122","通讯录权限没有开启"),plus.ios.deleteObject(a),e}():"calendar"==e?function(){var e=!1,a=plus.ios.import("EKEventStore");return 3==a.authorizationStatusForEntityType(0)?(e=!0,t("log","at js_sdk/wa-permission/permission.js:135","日历权限已经开启")):t("log","at js_sdk/wa-permission/permission.js:137","日历权限没有开启"),plus.ios.deleteObject(a),e}():"memo"==e&&function(){var e=!1,a=plus.ios.import("EKEventStore");return 3==a.authorizationStatusForEntityType(1)?(e=!0,t("log","at js_sdk/wa-permission/permission.js:150","备忘录权限已经开启")):t("log","at js_sdk/wa-permission/permission.js:152","备忘录权限没有开启"),plus.ios.deleteObject(a),e}();var a,i},requestAndroidPermission:function(e){return new Promise(((a,i)=>{plus.android.requestPermissions([e],(function(e){for(var i=0,s=0;s<e.granted.length;s++){t("log","at js_sdk/wa-permission/permission.js:167","已获取的权限："+e.granted[s]),i=1}for(s=0;s<e.deniedPresent.length;s++){t("log","at js_sdk/wa-permission/permission.js:172","拒绝本次申请的权限："+e.deniedPresent[s]),i=0}for(s=0;s<e.deniedAlways.length;s++){t("log","at js_sdk/wa-permission/permission.js:177","永久拒绝申请的权限："+e.deniedAlways[s]),i=-1}a(i)}),(function(e){t("log","at js_sdk/wa-permission/permission.js:187","申请权限错误："+e.code+" = "+e.message),a({code:e.code,message:e.message})}))}))},checkSystemEnableLocation:function(){if(l){var e=!1,a=plus.ios.import("CLLocationManager");return t("log","at js_sdk/wa-permission/permission.js:253","系统定位开启:"+(e=a.locationServicesEnabled())),plus.ios.deleteObject(a),e}var i=plus.android.importClass("android.content.Context"),s=plus.android.importClass("android.location.LocationManager");return t("log","at js_sdk/wa-permission/permission.js:262","系统定位开启:"+(e=plus.android.runtimeMainActivity().getSystemService(i.LOCATION_SERVICE).isProviderEnabled(s.GPS_PROVIDER))),e},gotoAppPermissionSetting:function(){if(l){var e=plus.ios.import("UIApplication").sharedApplication(),t=plus.ios.import("NSURL"),a=t.URLWithString("app-settings:");e.openURL(a),plus.ios.deleteObject(a),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}else{var i=plus.android.importClass("android.content.Intent"),s=plus.android.importClass("android.provider.Settings"),n=plus.android.importClass("android.net.Uri"),o=plus.android.runtimeMainActivity(),r=new i;r.setAction(s.ACTION_APPLICATION_DETAILS_SETTINGS);var c=n.fromParts("package",o.getPackageName(),null);r.setData(c),o.startActivity(r)}}};function c(e){var t=new Date(parseInt(e));return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`}const d=s({components:{EditDialog:o},data:()=>({newCode:"",packageCodes:[],showEditDialog:!1,editingItem:null,editingCode:"",readDayCount:4,dateShowActions:{},yizhanIcon:"/static/yizhan.png",version:"1.0.0"}),computed:{today(){const e=new Date;return`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`},groupedCodes(){const e={};this.packageCodes.forEach((t=>{const a=new Date(t.date),i=`${a.getFullYear()}年${a.getMonth()+1}月${a.getDate()}日`;e[i]||(e[i]={});const s=t.address||"未知地址";e[i][s]||(e[i][s]=[]),e[i][s].push(t)}));const t=Object.entries(e).sort(((e,t)=>new Date(t[0].replace(/(\d+)年(\d+)月(\d+)日/,"$1-$2-$3"))-new Date(e[0].replace(/(\d+)年(\d+)月(\d+)日/,"$1-$2-$3")))),a={};return t.forEach((([e,t])=>{a[e]=t})),a}},created(){try{const e=uni.getStorageSync("packageCodes");if(e){const t=JSON.parse(e);t.forEach((e=>{e.hasOwnProperty("showActions")||this.$set(e,"showActions",!1)})),this.packageCodes=t}}catch(e){t("error","at pages/index/index.vue:253","读取缓存失败:",e)}this.getAppVersion()},methods:{saveToStorage(){try{uni.setStorageSync("packageCodes",JSON.stringify(this.packageCodes))}catch(e){t("error","at pages/index/index.vue:264","保存缓存失败:",e)}},vibrateShort(){"web"!==uni.getSystemInfoSync().platform&&uni.vibrateShort({success:function(){t("log","at pages/index/index.vue:272","震动成功")},fail:function(){t("log","at pages/index/index.vue:275","震动失败")}})},addCode(){if(this.vibrateShort(),!this.newCode)return;const e=this.newCode.replace(/\s/g,""),t=(new Date).toLocaleDateString();if(this.packageCodes.some((a=>new Date(a.date).toLocaleDateString()===t&&a.code===e)))return void uni.showToast({title:"今日已添加该取件码",icon:"none",duration:2e3});const a=(new Date).toLocaleString(),i={code:this.newCode.replace(/\s/g,""),date:a,sendDate:c((new Date).getTime()),company:"手动添加",address:"手动添加",isPicked:!1,showActions:!1,isManual:!0};this.packageCodes.unshift(i),this.saveToStorage(),this.newCode=""},editCode(e){this.vibrateShort(),this.editingItem=e,this.editingCode=e.code,this.showEditDialog=!0,e.showActions=!1},handleEditConfirm(e){if(!this.editingItem)return;const t=e.replace(/\s/g,""),a=new Date(this.editingItem.date).toLocaleDateString();if(t===this.editingItem.code)return this.editingItem=null,void(this.editingCode="");this.packageCodes.some((e=>new Date(e.date).toLocaleDateString()===a&&e.code===t&&e!==this.editingItem))?uni.showToast({title:"该日期已存在相同取件码",icon:"none",duration:2e3}):(this.editingItem.code=t,this.saveToStorage(),this.editingItem=null,this.editingCode="")},deleteCode(e){this.vibrateShort();const t=this.packageCodes.filter((t=>t!==e));this.$set(this,"packageCodes",t),this.saveToStorage()},togglePicked(e){this.vibrateShort(),e.isPicked=!e.isPicked,this.saveToStorage()},getPendingCount:e=>Object.values(e).flat().filter((e=>!e.isPicked)).length,getTextBeforeNumber:e=>e.split(/\d+/)[0],getNumber(e){const t=e.match(/\d+/);return t?t[0]:""},getTextAfterNumber(e){const t=e.split(/\d+/);return t.length>1?t[1]:""},formatCode:e=>/^\d{8}$/.test(e)?e.replace(/(\d{4})(?=\d)/g,"$1 "):e,extractInfoByRules(e){const t={code:"",express:"",address:""},a=JSON.parse(uni.getStorageSync("matchRulesList")||"[]").filter((e=>e.enabled));for(const i of a)Object.keys(i.rules).forEach((a=>{if(t[a])return;const s=i.rules[a];if(s.start&&s.end){const i=e.indexOf(s.start),n=e.indexOf(s.end,i+s.start.length);-1!==i&&-1!==n&&(t[a]=e.substring(i+s.start.length,n).trim())}}));return t},async readSms(){this.vibrateShort();const e=JSON.parse(uni.getStorageSync("matchRulesList")||"[]");if(0!==e.filter((e=>e.enabled)).length){if("Android"===plus.os.name)if(1==await r.requestAndroidPermission("android.permission.READ_SMS")){var a=plus.android.runtimeMainActivity(),i=plus.android.importClass("android.net.Uri").parse("content://sms/"),s=a.getContentResolver();plus.android.importClass(s),uni.showLoading({title:"匹配短信记录中.."});try{const e=new Date,t=new Date(e);t.setDate(e.getDate()-this.readDayCount),t.setHours(0,0,1,0);var n="date > "+t.getTime(),o=s.query(i,null,n,null,null);if(plus.android.importClass(o),o.moveToFirst()){let e=[];do{let t={};var l=o.getColumnIndex("address"),d=o.getString(l);t.telphone=d;var h=o.getColumnIndex("body"),m=o.getString(h);t.content=m;var u=o.getString(o.getColumnIndex("date"));u=c(u),t.sendDate=u;let a=this.extractInfoByRules(m);a.code&&(t.code=a.code,t.company=a.express||"未知快递",t.address=a.address||"未知地址",e.push(t))}while(o.moveToNext());this.dyAddCode(e)}o.close(),uni.hideLoading()}catch(p){t("error","at pages/index/index.vue:528","获取短信失败",p),uni.hideLoading(),uni.showToast({title:"读取短信失败",icon:"none"})}}else uni.showToast({title:"请授权读取短信权限",icon:"none"})}else uni.showModal({title:"提示",content:0===e.length?"您还没有设置任何匹配规则，是否现在去设置？":"没有已启用的匹配规则，是否去设置？",confirmText:"去设置",cancelText:"取消",success:e=>{e.confirm&&uni.navigateTo({url:"/pages/my/match-rules"})}})},dyAddCode(e){for(let t of e){if(this.packageCodes.some((e=>e.code===t.code)))continue;const e={code:t.code,date:new Date(t.sendDate).toLocaleString(),sendDate:t.sendDate,company:t.company,address:t.address,isPicked:!1,showActions:!1};this.packageCodes.unshift(e),this.saveToStorage()}0===e.length&&uni.showToast({title:"暂无匹配结果",icon:"none"})},toggleMoreActions(e){this.vibrateShort(),e.hasOwnProperty("showActions")||this.$set(e,"showActions",!1),this.packageCodes.forEach((t=>{t!==e&&t.showActions&&this.$set(t,"showActions",!1)})),this.$set(e,"showActions",!e.showActions)},toggleDateActions(e){this.vibrateShort(),Object.keys(this.dateShowActions).forEach((t=>{t!==e&&this.dateShowActions[t]&&this.$set(this.dateShowActions,t,!1)})),this.$set(this.dateShowActions,e,!this.dateShowActions[e])},deleteDate(e,t){this.vibrateShort(),uni.showModal({title:"确认删除",content:`是否删除 ${e} 的所有取件码？`,success:t=>{t.confirm&&(this.packageCodes=this.packageCodes.filter((t=>{const a=new Date(t.date);return`${a.getFullYear()}年${a.getMonth()+1}月${a.getDate()}日`!==e})),this.saveToStorage()),this.$set(this.dateShowActions,e,!1)}})},getCompanyShortName:e=>e?/^[a-zA-Z\s]+$/.test(e)?e.trim().split(/\s+/)[0].substring(0,2).toUpperCase():e.substring(0,2):"",isLastItem(e){for(const[t,a]of Object.entries(this.groupedCodes))for(const[i,s]of Object.entries(a))if(s.includes(e)&&s.indexOf(e)===s.length-1)return!0;return!1},clearInput(){this.vibrateShort(),this.newCode=""},getAppVersion(){try{this.version=plus.runtime.version}catch(e){t("error","at pages/index/index.vue:656","获取版本号失败:",e)}},handlePageClick(){this.packageCodes.forEach((e=>{e.showActions&&this.$set(e,"showActions",!1)})),Object.keys(this.dateShowActions).forEach((e=>{this.dateShowActions[e]&&this.$set(this.dateShowActions,e,!1)}))}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n),d=e.resolveComponent("edit-dialog");return e.openBlock(),e.createElementBlock("view",{class:"page-wrapper",onClick:i[5]||(i[5]=(...e)=>r.handlePageClick&&r.handlePageClick(...e))},[e.createElementVNode("view",{class:"page-bg"}),e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"title-wrapper"},[e.createElementVNode("text",{class:"title"},"取件列表")]),e.createElementVNode("view",{class:"card input-card"},[e.createElementVNode("view",{class:"input-area"},[e.createElementVNode("view",{class:"input-wrapper"},[e.withDirectives(e.createElementVNode("input",{class:"code-input","onUpdate:modelValue":i[0]||(i[0]=e=>l.newCode=e),type:"text",placeholder:"请输入取件码"},null,512),[[e.vModelText,l.newCode]]),l.newCode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"clear-btn",onClick:i[1]||(i[1]=(...e)=>r.clearInput&&r.clearInput(...e))},[e.createVNode(c,{type:"clear",size:"14",color:"#999"})])):e.createCommentVNode("",!0)]),e.createElementVNode("button",{class:"add-btn",onClick:i[2]||(i[2]=(...e)=>r.addCode&&r.addCode(...e))},[e.createVNode(c,{type:"plusempty",size:"18",color:"#fff"}),e.createElementVNode("text",null,"添加")]),e.createElementVNode("button",{class:"read-sms-btn",onClick:i[3]||(i[3]=(...e)=>r.readSms&&r.readSms(...e))},[e.createVNode(c,{type:"refresh",size:"18",color:"#1673ff"}),e.createElementVNode("text",null,"自动匹配")])])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.groupedCodes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"card code-card"},[e.createElementVNode("view",{class:"card-header"},[e.createElementVNode("text",{class:"card-title"},e.toDisplayString(a),1),e.createElementVNode("view",{class:"header-right"},[e.createElementVNode("text",{class:"card-extra"},[e.createElementVNode("text",{class:"pending-count"},e.toDisplayString(r.getPendingCount(t)),1),e.createElementVNode("text",null,"个待取件")]),e.createElementVNode("view",{class:"date-more-actions"},[e.createElementVNode("view",{class:"more-btn",onClick:e.withModifiers((e=>r.toggleDateActions(a)),["stop"])},[e.createElementVNode("view",{class:"dots"},[e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"})])],8,["onClick"]),l.dateShowActions[a]?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["action-menu",{"menu-up":r.isLastItem(t)}])},[e.createElementVNode("view",{class:"action-item delete",onClick:e.withModifiers((e=>r.deleteDate(a,t)),["stop"])},[e.createVNode(c,{type:"trash",size:"16"}),e.createElementVNode("text",null,"删除")],8,["onClick"])],2)):e.createCommentVNode("",!0)])])]),e.createElementVNode("view",{class:"code-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"address-group"},[e.createElementVNode("view",{class:"address-header"},[e.createElementVNode("image",{class:"address-icon",src:l.yizhanIcon,mode:"aspectFit"},null,8,["src"]),e.createElementVNode("text",{class:"address-text"},e.toDisplayString(a),1)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"code-item",key:a},[e.createElementVNode("view",{class:e.normalizeClass(["code-content",{picked:t.isPicked}])},[e.createElementVNode("view",{class:"code-main"},[e.createElementVNode("view",{class:e.normalizeClass(["company-icon",{picked:t.isPicked}])},e.toDisplayString(r.getCompanyShortName(t.company)),3),e.createElementVNode("view",{class:"code-info"},[e.createElementVNode("view",{class:"code-text"},e.toDisplayString(r.formatCode(t.code)),1),e.createElementVNode("view",{class:e.normalizeClass(["code-desc",{picked:t.isPicked}])},[e.createElementVNode("text",null,e.toDisplayString(t.sendDate?t.sendDate.split(" ")[1]:"")+" "+e.toDisplayString(t.isManual?"添加":"进站"),1)],2)])])],2),e.createElementVNode("view",{class:"right-actions"},[e.createElementVNode("view",{class:e.normalizeClass(["picked-btn",{"is-picked":t.isPicked}]),onClick:e=>r.togglePicked(t)},[e.createElementVNode("text",null,e.toDisplayString(t.isPicked?"已取":"取件"),1),t.isPicked?(e.openBlock(),e.createElementBlock("text",{key:0,class:"picked-icon"},"✓")):e.createCommentVNode("",!0)],10,["onClick"]),e.createElementVNode("view",{class:"more-actions"},[e.createElementVNode("view",{class:"more-btn",onClick:e.withModifiers((e=>r.toggleMoreActions(t)),["stop"])},[e.createElementVNode("view",{class:"dots"},[e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"})])],8,["onClick"]),t.showActions?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["action-menu",{"menu-up":r.isLastItem(t)}])},[e.createElementVNode("view",{class:"action-item",onClick:e.withModifiers((e=>r.editCode(t)),["stop"])},[e.createVNode(c,{type:"compose",size:"16"}),e.createElementVNode("text",null,"修改")],8,["onClick"]),e.createElementVNode("view",{class:"action-item delete",onClick:e.withModifiers((e=>r.deleteCode(t)),["stop"])},[e.createVNode(c,{type:"trash",size:"16",color:"#ff0000"}),e.createElementVNode("text",null,"删除")],8,["onClick"])],2)):e.createCommentVNode("",!0)])])])))),128))])))),128))])])))),128))]),e.createVNode(d,{show:l.showEditDialog,"onUpdate:show":i[4]||(i[4]=e=>l.showEditDialog=e),value:l.editingCode,onConfirm:r.handleEditConfirm},null,8,["show","value","onConfirm"])])}]]),h="/static/images/taobao.png",m="/static/images/jd.png",u="/static/images/pinduoduo.png",p="/static/images/douyin.png",g="/static/images/weipinhui.png",f="/static/images/xiaohongshu.png",k="/static/images/1688.png",w="/static/images/other.png";const y=s({data:()=>({version:"1.0.0",taobao:h,jingdong:m,pinduoduo:u,douyin:p,weipinhui:g,xiaohongshu:f,alibaba:k,other:w,tableData:[],platforms:["淘宝","京东","拼多多","抖音","唯品会","小红书","1688","其他"],menuStyle:{top:"0px",right:"25px"},autoFocus:!1}),methods:{formatDate(e){const[t,a,i]=e.split("-");return`${t}年${parseInt(a)}月${parseInt(i)}日`},getPlatformAmount:e=>e.reduce(((e,t)=>{const a=parseFloat(t.price||"0");return e+(isNaN(a)?0:a)}),0).toFixed(2),toggleMoreActions(e,t){this.vibrateShort(),this.tableData.forEach((t=>{t.list.forEach((t=>{t!==e&&this.$set(t,"showActions",!1)}))})),this.$set(e,"showActions",!e.showActions)},showAddPackage(){this.vibrateShort(),uni.navigateTo({url:"/pages/packages/edit",animationType:"slide-in-right",animationDuration:300})},showEditPackage(e,t){this.vibrateShort(),uni.setStorageSync("editData",JSON.stringify({item:e,date:t,index:this.tableData.find((e=>e.date===t)).list.findIndex((t=>t===e))})),this.$set(e,"showActions",!1),uni.navigateTo({url:"/pages/packages/edit?type=edit"})},handlePageClick(){this.tableData.forEach((e=>{e.list.forEach((e=>{e.showActions&&this.$set(e,"showActions",!1)}))}))},clearData(){this.tableData=[];try{uni.removeStorageSync("packageData")}catch(e){t("error","at pages/packages/index.vue:244","清除缓存失败:",e)}},confirmDeleteDateGroup(e){this.vibrateShort(),uni.showModal({title:"确认删除",content:"是否删除该日期下的所有包裹？",confirmColor:"#ff5a5f",success:t=>{t.confirm&&this.deleteDateGroup(e)}})},deleteDateGroup(e){this.vibrateShort();const t=this.tableData.findIndex((t=>t.date===e));-1!==t&&(this.tableData.splice(t,1),this.saveData())},getCheckedCount:e=>e.filter((e=>e.checked)).length,handlePackageSubmit({data:e,isEdit:t,editDate:a,editIndex:i}){const s=this.getPlatformIcon(e.platform),n={...e,price:e.price||"0.00",platformIcon:s,showActions:!1};if(t)if(a===e.date){const e=this.tableData.find((e=>e.date===a));e&&-1!==i&&this.$set(e.list,i,n)}else{const t=this.tableData.find((e=>e.date===a));if(t&&-1!==i&&(t.list.splice(i,1),0===t.list.length)){const e=this.tableData.findIndex((e=>e.date===a));-1!==e&&this.tableData.splice(e,1)}let s=this.tableData.find((t=>t.date===e.date));if(!s){s={date:e.date,list:[]};const t=this.tableData.findIndex((t=>t.date<e.date));-1===t?this.tableData.push(s):this.tableData.splice(t,0,s)}s.list.unshift(n)}else{let t=this.tableData.find((t=>t.date===e.date));if(!t){t={date:e.date,list:[]};const a=this.tableData.findIndex((t=>t.date<e.date));-1===a?this.tableData.push(t):this.tableData.splice(a,0,t)}t.list.unshift(n)}this.saveData()},getPlatformIcon(e){return{"淘宝":this.taobao,"京东":this.jingdong,"拼多多":this.pinduoduo,"抖音":this.douyin,"唯品会":this.weipinhui,"小红书":this.xiaohongshu,1688:this.alibaba,"其他":this.other}[e]||this.other},groupByPlatform(e){const t={};return e.forEach((e=>{t[e.platform]||(t[e.platform]=[]),t[e.platform].push(e)})),t},saveData(){try{uni.setStorageSync("packageData",JSON.stringify(this.tableData))}catch(e){t("error","at pages/packages/index.vue:388","保存数据失败:",e)}},loadData(){try{const e=uni.getStorageSync("packageData");e&&(this.tableData=JSON.parse(e))}catch(e){t("error","at pages/packages/index.vue:398","读取数据失败:",e)}},toggleCheck(e){this.vibrateShort(),this.$set(e,"checked",!e.checked),this.saveData()},deletePackage(e,t){this.vibrateShort(),this.$set(e,"showActions",!1);const a=this.tableData.find((e=>e.date===t));if(a){const i=a.list.findIndex((t=>t===e));if(-1!==i){if(a.list.splice(i,1),0===a.list.length){const e=this.tableData.findIndex((e=>e.date===t));-1!==e&&this.tableData.splice(e,1)}this.saveData()}}},vibrateShort(){uni.vibrateShort({success:function(){t("log","at pages/packages/index.vue:436","振动成功")}})},isLastItem(e){const t=uni.createSelectorQuery();let a=!1;return t.select(".goods-actions").boundingClientRect((e=>{if(e){const t=uni.getSystemInfoSync().windowHeight;a=t-e.bottom<300}})).exec(),a},goToApp(e){plus.runtime.openURL({"淘宝":"taobao://taobao.com","京东":"openApp.jdMobile://","拼多多":"pinduoduo://","抖音":"snssdk1128://","唯品会":"vipshop://","小红书":"https://xiaohongshu.com/",1688:"https://m.1688.com/"}[e])}},created(){this.loadData()}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n);return e.openBlock(),e.createElementBlock("view",{class:"page-wrapper",onClick:i[1]||(i[1]=(...e)=>r.handlePageClick&&r.handlePageClick(...e))},[e.createElementVNode("view",{class:"page-bg"}),e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"title-wrapper"},[e.createElementVNode("text",{class:"title"},"包裹记录")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.tableData,(t=>(e.openBlock(),e.createElementBlock("view",{class:"timeline",key:t.date},[e.createElementVNode("view",{class:"timeline-date"},[e.createElementVNode("text",null,e.toDisplayString(r.formatDate(t.date)),1)]),e.createElementVNode("view",{class:"date-stats"},[e.createElementVNode("text",null,"记录了"+e.toDisplayString(t.list.length)+"个包裹，"+e.toDisplayString(r.getCheckedCount(t.list))+"个已签收",1)]),e.createElementVNode("view",{class:"platform-cards"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.groupByPlatform(t.list),((a,i)=>(e.openBlock(),e.createElementBlock("view",{class:"platform-card",key:i},[e.createElementVNode("view",{class:"platform-header",onClick:e=>r.goToApp(i)},[e.createElementVNode("image",{class:"platform-icon",src:r.getPlatformIcon(i),mode:"aspectFit"},null,8,["src"]),e.createElementVNode("text",{class:"platform-name"},e.toDisplayString(i),1),e.createElementVNode("text",{class:"platform-amount"}," ¥"+e.toDisplayString(r.getPlatformAmount(a)),1)],8,["onClick"]),e.createElementVNode("view",{class:"goods-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,((a,i)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",key:i},[e.createElementVNode("view",{class:"goods-content"},[e.createElementVNode("checkbox",{value:a.id,checked:a.checked,onClick:e=>r.toggleCheck(a),color:"#1673ff"},null,8,["value","checked","onClick"]),e.createElementVNode("view",{class:"goods-info"},[e.createElementVNode("text",{class:"goods-name text-ellipsis"},e.toDisplayString(a.name),1)]),e.createElementVNode("text",{class:"goods-price"},e.toDisplayString(a.price),1)]),e.createElementVNode("view",{class:"goods-actions"},[e.createElementVNode("view",{class:"more-btn",onClick:e.withModifiers((e=>r.toggleMoreActions(a,t.date)),["stop"])},[e.createElementVNode("view",{class:"dots"},[e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"dot"})])],8,["onClick"]),a.showActions?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["action-menu",{"menu-up":r.isLastItem(a)}])},[e.createElementVNode("view",{class:"action-item",onClick:e.withModifiers((e=>r.showEditPackage(a,t.date)),["stop"])},[e.createVNode(c,{type:"compose",size:"16",color:"#666"}),e.createElementVNode("text",null,"修改")],8,["onClick"]),e.createElementVNode("view",{class:"action-item delete",onClick:e.withModifiers((e=>r.deletePackage(a,t.date)),["stop"])},[e.createVNode(c,{type:"trash",size:"16",color:"#ff0000"}),e.createElementVNode("text",{style:{color:"#ff0000"}},"删除")],8,["onClick"])],2)):e.createCommentVNode("",!0)])])))),128))])])))),128))]),e.createElementVNode("view",{class:"date-delete-wrapper",onClick:e=>r.confirmDeleteDateGroup(t.date)},[e.createVNode(c,{type:"trash",size:"16"}),e.createElementVNode("view",null,"删除")],8,["onClick"])])))),128))]),e.createElementVNode("view",{class:"add-package-btn",onClick:i[0]||(i[0]=(...e)=>r.showAddPackage&&r.showAddPackage(...e))},[e.createVNode(c,{type:"plusempty",size:"24",color:"#fff"})]),e.createElementVNode("view",{class:"bottom-safe-area"})])}]]);function D(e,t){return`${V(e)} ${v(e,t)}`}function V(e){e=C(e);const t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,i=e.getDate();return`${t}-${E(a)}-${E(i)}`}function v(e,t){e=C(e);const a=(e=new Date(e)).getHours(),i=e.getMinutes(),s=e.getSeconds();return t?`${E(a)}:${E(i)}`:`${E(a)}:${E(i)}:${E(s)}`}function E(e){return e<10&&(e=`0${e}`),e}function S(e){return e?"00:00":"00:00:00"}function N(e,t){return(e=new Date(C(e)))<=(t=new Date(C(t)))}function x(e){return e.match(/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g)}const b=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function C(e){return"string"==typeof e&&b.test(e)&&(e=e.replace(/-/g,"/")),e}const T=s({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(t,a,i,s,n,o){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":i.weeks.disable,"uni-calendar-item--before-checked-x":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked-x":i.weeks.afterMultiple}]),onClick:a[0]||(a[0]=e=>o.choiceDate(i.weeks)),onMouseenter:a[1]||(a[1]=e=>o.handleMousemove(i.weeks))},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&(i.calendar.userChecked||!i.checkHover),"uni-calendar-item--checked-range-text":i.checkHover,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},[i.selected&&i.weeks.extraInfo?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},e.toDisplayString(i.weeks.date),1)],2),e.createElementVNode("view",{class:e.normalizeClass({"uni-calendar-item--today":i.weeks.isToday})},null,2)],34)}],["__scopeId","data-v-ee11a364"]]),_=["{","}"];const R=/^(?:\d)+/,B=/^(?:\w)+/;const M="zh-Hans",$="zh-Hant",P="en",A=Object.prototype.hasOwnProperty,I=(e,t)=>A.call(e,t),j=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,a=_){if(!t)return[e];let i=this._caches[e];return i||(i=function(e,[t,a]){const i=[];let s=0,n="";for(;s<e.length;){let o=e[s++];if(o===t){n&&i.push({type:"text",value:n}),n="";let t="";for(o=e[s++];void 0!==o&&o!==a;)t+=o,o=e[s++];const l=o===a,r=R.test(t)?"list":l&&B.test(t)?"named":"unknown";i.push({value:t,type:r})}else n+=o}return n&&i.push({type:"text",value:n}),i}(e,a),this._caches[e]=i),function(e,t){const a=[];let i=0;const s=Array.isArray(t)?"list":(n=t,null!==n&&"object"==typeof n?"named":"unknown");var n;if("unknown"===s)return a;for(;i<e.length;){const n=e[i];switch(n.type){case"text":a.push(n.value);break;case"list":a.push(t[parseInt(n.value,10)]);break;case"named":"named"===s&&a.push(t[n.value])}i++}return a}(i,t)}};function O(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return M;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?M:e.indexOf("-hant")>-1?$:(a=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==a.indexOf(e)))?$:M);var a;let i=[P,"fr","es"];t&&Object.keys(t).length>0&&(i=Object.keys(t));const s=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,i);return s||void 0}class L{constructor({locale:e,fallbackLocale:t,messages:a,watcher:i,formater:s}){this.locale=P,this.fallbackLocale=P,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=s||j,this.messages=a||{},this.setLocale(e||P),i&&this.watchLocale(i)}setLocale(e){const t=this.locale;this.locale=O(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,a=!0){const i=this.messages[e];i?a?Object.assign(i,t):Object.keys(t).forEach((e=>{I(i,e)||(i[e]=t[e])})):this.messages[e]=t}f(e,t,a){return this.formater.interpolate(e,t,a).join("")}t(e,t,a){let i=this.message;return"string"==typeof t?(t=O(t,this.messages))&&(i=this.messages[t]):a=t,I(i,e)?this.formater.interpolate(i[e],a).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function z(e,t={},a,i){if("string"!=typeof e){const a=[t,e];e=a[0],t=a[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():P),"string"!=typeof a&&(a="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||P);const s=new L({locale:e,fallbackLocale:a,messages:t,watcher:i});let n=(e,t)=>{if("function"!=typeof getApp)n=function(e,t){return s.t(e,t)};else{let e=!1;n=function(t,a){const i=getApp().$vm;return i&&(i.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(i,s))),s.t(t,a)}}return n(e,t)};return{i18n:s,f:(e,t,a)=>s.f(e,t,a),t:(e,t)=>n(e,t),add:(e,t,a=!0)=>s.add(e,t,a),watch:e=>s.watchLocale(e),getLocale:()=>s.getLocale(),setLocale:e=>s.setLocale(e)}}const H={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select date and time","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}},{t:F}=z(H);const U=s({name:"UniDatetimePicker",data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),options:{virtualHost:!0},props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e){e?(this.parseValue(C(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(C(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(C(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>F("uni-datetime-picker.selectTime"),okText:()=>F("uni-datetime-picker.ok"),clearText:()=>F("uni-datetime-picker.clear"),cancelText:()=>F("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,a){let i=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),a=this.superTimeStamp(a),i=t&&a?e<t?new Date(t):e>a?new Date(a):new Date(e):t&&!a?t<=e?new Date(e):new Date(t):!t&&a?e<=a?new Date(e):new Date(a):new Date(e),i},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const a=e.split(":");this[t+"Hour"]=Number(a[0]),this[t+"Minute"]=Number(a[1]),this[t+"Second"]=Number(a[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&(e=parseInt(e));const a=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||a.test(e)||(e+=" 23:59:59");const i=new Date(e);this[t+"Year"]=i.getFullYear(),this[t+"Month"]=i.getMonth()+1,this[t+"Day"]=i.getDate(),"datetime"===this.type&&(this[t+"Hour"]=i.getHours(),this[t+"Minute"]=i.getMinutes(),this[t+"Second"]=i.getSeconds())}},getCurrentRange(e){const t=[];for(let a=this["min"+this.capitalize(e)];a<=this["max"+this.capitalize(e)];a++)t.push(a);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,a){-1===a.indexOf(t)&&(this[e]=a[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=C(this.time);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}},[["render",function(t,a,i,s,n,o){return e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker"},[e.createElementVNode("view",{onClick:a[0]||(a[0]=(...e)=>o.initTimePicker&&o.initTimePicker(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":i.disabled,"uni-datetime-picker-timebox":i.border}])},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(n.time),1),n.time?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(o.selectTimeText),1)]))],2)]),!0)]),n.visible?(e.openBlock(),e.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:a[1]||(a[1]=(...e)=>o.tiggerTimePicker&&o.tiggerTimePicker(...e))})):e.createCommentVNode("",!0),n.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-datetime-picker-popup",[n.dateShow&&n.timeShow?"":"fix-nvue-height"]]),style:e.normalizeStyle(n.fixNvueBug)},[e.createElementVNode("view",{class:"uni-title"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(o.selectTimeText),1)]),n.dateShow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":n.indicatorStyle,value:o.ymd,onChange:a[2]||(a[2]=(...e)=>o.bindDateChange&&o.bindDateChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.years,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.months,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.days,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):e.createCommentVNode("",!0),n.timeShow?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:e.normalizeClass(["uni-datetime-picker-view",[i.hideSecond?"time-hide-second":""]]),"indicator-style":n.indicatorStyle,value:o.hms,onChange:a[3]||(a[3]=(...e)=>o.bindTimeChange&&o.bindTimeChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.hours,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.minutes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.seconds,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(o.lessThanTen(t)),1)])))),128))]))],42,["indicator-style","value"]),e.createElementVNode("text",{class:e.normalizeClass(["uni-datetime-picker-sign",[i.hideSecond?"sign-center":"sign-left"]])},":",2),i.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-datetime-picker-btn"},[e.createElementVNode("view",{onClick:a[4]||(a[4]=(...e)=>o.clearTime&&o.clearTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.clearText),1)]),e.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[e.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:a[5]||(a[5]=(...e)=>o.tiggerTimePicker&&o.tiggerTimePicker(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.cancelText),1)]),e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>o.setTime&&o.setTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(o.okText),1)])])])],6)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-8a3925ff"]]),{t:Y}=z(H);const W=s({name:"UniDatetimePicker",options:{virtualHost:!0},components:{Calendar:s({components:{calendarItem:T,timePicker:U},options:{virtualHost:!0},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},startDate:{type:String,default:""},endDate:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},range:{type:Boolean,default:!1},hasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})},defaultValue:{type:[String,Object,Array],default:""}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:{},aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale&&(this.cale.setStartDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},endDate(e){this.cale&&(this.cale.setEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},selected(e){this.cale&&(this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks)},pleStatus:{immediate:!0,handler(e){const{before:t,after:a,fulldate:i,which:s}=e;this.tempRange.before=t,this.tempRange.after=a,setTimeout((()=>{if(i)if(this.cale.setHoverMultiple(i),t&&a){if(this.cale.lastHover=!0,this.rangeWithinMonth(a,t))return;this.setDate(t)}else this.cale.setMultiple(i),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else{if(!this.cale)return;this.cale.setDefaultMultiple(t,a),"left"===s&&t?(this.setDate(t),this.weeks=this.cale.weeks):a&&(this.setDate(a),this.weeks=this.cale.weeks),this.cale.lastHover=!0}}),16)}}},computed:{timepickerStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},timepickerEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>Y("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||Y("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||Y("uni-datetime-picker.endDate")},okText:()=>Y("uni-datetime-picker.ok"),yearText:()=>Y("uni-datetime-picker.year"),monthText:()=>Y("uni-datetime-picker.month"),MONText:()=>Y("uni-calender.MON"),TUEText:()=>Y("uni-calender.TUE"),WEDText:()=>Y("uni-calender.WED"),THUText:()=>Y("uni-calender.THU"),FRIText:()=>Y("uni-calender.FRI"),SATText:()=>Y("uni-calender.SAT"),SUNText:()=>Y("uni-calender.SUN"),confirmText:()=>Y("uni-calender.confirm")},created(){this.cale=new class{constructor({selected:e,startDate:t,endDate:a,range:i}={}){this.date=this.getDateObj(new Date),this.selected=e||[],this.startDate=t,this.endDate=a,this.range=i,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){const t=this.getDateObj(e);this.getWeeks(t.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getPreMonthObj(e){e=C(e);const t=(e=new Date(e)).getMonth();e.setMonth(t-1);const a=e.getMonth();return 0!==t&&a-t==0&&e.setMonth(a-1),this.getDateObj(e)}getNextMonthObj(e){e=C(e);const t=(e=new Date(e)).getMonth();e.setMonth(t+1);const a=e.getMonth();return a-t>1&&e.setMonth(a-1),this.getDateObj(e)}getDateObj(e){return e=C(e),{fullDate:V(e=new Date(e)),year:e.getFullYear(),month:E(e.getMonth()+1),date:E(e.getDate()),day:e.getDay()}}getPreMonthDays(e,t){const a=[];for(let i=e-1;i>=0;i--){const e=t.month-1;a.push({date:new Date(t.year,e,-i).getDate(),month:e,disable:!0})}return a}getCurrentMonthDays(e,t){const a=[],i=this.date.fullDate;for(let s=1;s<=e;s++){const e=`${t.year}-${t.month}-${E(s)}`,n=i===e,o=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t}));this.startDate&&N(this.startDate,e),this.endDate&&N(e,this.endDate);let l=this.multipleStatus.data,r=-1;this.range&&l&&(r=l.findIndex((t=>this.dateEqual(t,e))));const c=-1!==r;a.push({fullDate:e,year:t.year,date:s,multiple:!!this.range&&c,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:this.startDate&&!N(this.startDate,e)||this.endDate&&!N(e,this.endDate),isToday:n,userChecked:!1,extraInfo:o})}return a}_getNextMonthDays(e,t){const a=[],i=t.month+1;for(let s=1;s<=e;s++)a.push({date:s,month:i,disable:!0});return a}getInfo(e){return e||(e=new Date),this.calendar.find((t=>t.fullDate===this.getDateObj(e).fullDate))}dateEqual(e,t){return e=new Date(C(e)),t=new Date(C(t)),e.valueOf()===t.valueOf()}isLogicBefore(e,t,a){let i=t;return t&&a&&(i=N(t,a)?t:a),this.dateEqual(i,e)}isLogicAfter(e,t,a){let i=a;return t&&a&&(i=N(t,a)?a:t),this.dateEqual(i,e)}geDateAll(e,t){var a=[],i=e.split("-"),s=t.split("-"),n=new Date;n.setFullYear(i[0],i[1]-1,i[2]);var o=new Date;o.setFullYear(s[0],s[1]-1,s[2]);for(var l=n.getTime()-864e5,r=o.getTime()-864e5,c=l;c<=r;)c+=864e5,a.push(this.getDateObj(new Date(parseInt(c))).fullDate);return a}setMultiple(e){if(!this.range)return;let{before:t,after:a}=this.multipleStatus;if(t&&a){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,N(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(e)}setHoverMultiple(e){if(!this.range||this.lastHover)return;const{before:t}=this.multipleStatus;t?(this.multipleStatus.after=e,N(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this.getWeeks(e)}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(N(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)):(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)))}getWeeks(e){const{year:t,month:a}=this.getDateObj(e),i=new Date(t,a-1,1).getDay(),s=this.getPreMonthDays(i,this.getDateObj(e)),n=new Date(t,a,0).getDate(),o=42-i-n,l=[...s,...this.getCurrentMonthDays(n,this.getDateObj(e)),...this._getNextMonthDays(o,this.getDateObj(e))],r=new Array(6);for(let c=0;c<l.length;c++){const e=Math.floor(c/7);r[e]||(r[e]=new Array(7)),r[e][c%7]=l[c]}this.calendar=l,this.weeks=r}}({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:a}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[a,i]=e.split("-"),[s,n]=t.split("-");return a===s&&i===n},maskClick(){this.close(),this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate(new Date)},bindDateChange(e){const t=e.detail.value+"-1";this.setDate(t)},init(e){if(this.cale&&(this.cale.setDate(e||new Date),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e),this.calendar={...this.nowDate},!e&&(this.calendar.fullDate="",this.defaultValue&&!this.range))){const e=new Date(this.defaultValue),t=V(e),a=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),n=e.getDay();this.calendar={fullDate:t,year:a,month:i,date:s,day:n},this.tempSingleDate=t,this.time=v(e,this.hideSecond)}},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(e){(this.insert||e)&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){this.range||(this.calendar.fullDate||(this.calendar=this.cale.getInfo(new Date),this.tempSingleDate=this.calendar.fullDate),this.hasTime&&!this.time&&(this.time=v(new Date,this.hideSecond)));let{year:t,month:a,date:i,fullDate:s,extraInfo:n}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:a,date:i,time:this.time,timeRange:this.timeRange,fulldate:s,extraInfo:n||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate;const t=new Date(this.cale.multipleStatus.before).getTime(),a=new Date(this.cale.multipleStatus.after).getTime();t>a&&a?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change(!0)},changeMonth(e){let t;"pre"===e?t=this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate:"next"===e&&(t=this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate),this.setDate(t),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}},[["render",function(t,i,s,o,l,r){const c=e.resolveComponent("calendar-item"),d=e.resolveComponent("time-picker"),h=a(e.resolveDynamicComponent("uni-icons"),n);return e.openBlock(),e.createElementBlock("view",{class:"uni-calendar",onMouseleave:i[9]||(i[9]=(...e)=>r.leaveCale&&r.leaveCale(...e))},[!s.insert&&l.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":l.aniMaskShow}]),onClick:i[0]||(i[0]=(...e)=>r.maskClick&&r.maskClick(...e))},null,2)):e.createCommentVNode("",!0),s.insert||l.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!s.insert,"uni-calendar--ani-show":l.aniMaskShow,"uni-calendar__content-mobile":l.aniMaskShow}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!s.insert}])},[e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:i[1]||(i[1]=e.withModifiers((e=>r.changeMonth("pre")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})]),e.createElementVNode("picker",{mode:"date",value:s.date,fields:"month",onChange:i[2]||(i[2]=(...e)=>r.bindDateChange&&r.bindDateChange(...e))},[e.createElementVNode("text",{class:"uni-calendar__header-text"},e.toDisplayString((l.nowDate.year||"")+r.yearText+(l.nowDate.month||"")+r.monthText),1)],40,["value"]),e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:i[3]||(i[3]=e.withModifiers((e=>r.changeMonth("next")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})]),s.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"dialog-close",onClick:i[4]||(i[4]=(...e)=>r.maskClick&&r.maskClick(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})]))],2),e.createElementVNode("view",{class:"uni-calendar__box"},[s.showMonth?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[e.createElementVNode("text",{class:"uni-calendar__box-bg-text"},e.toDisplayString(l.nowDate.month),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.SUNText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.MONText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.TUEText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.WEDText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.THUText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.FRIText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(r.SATText),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.weeks,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks",key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks-item",key:a},[e.createVNode(c,{class:"uni-calendar-item--hook",weeks:t,calendar:l.calendar,selected:s.selected,checkHover:s.range,onChange:r.choiceDate,onHandleMouse:r.handleMouse},null,8,["weeks","calendar","selected","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),s.insert||s.range||!s.hasTime?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempSingleDate?l.tempSingleDate:r.selectDateText),1),e.createVNode(d,{type:"time",start:r.timepickerStartTime,end:r.timepickerEndTime,modelValue:l.time,"onUpdate:modelValue":i[5]||(i[5]=e=>l.time=e),disabled:!l.tempSingleDate,border:!1,"hide-second":s.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!s.insert&&s.range&&s.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[e.createElementVNode("view",{class:"uni-date-changed--time-start"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempRange.before?l.tempRange.before:r.startDateText),1),e.createVNode(d,{type:"time",start:r.timepickerStartTime,modelValue:l.timeRange.startTime,"onUpdate:modelValue":i[6]||(i[6]=e=>l.timeRange.startTime=e),border:!1,"hide-second":s.hideSecond,disabled:!l.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),e.createElementVNode("view",{style:{"line-height":"50px"}},[e.createVNode(h,{type:"arrowthinright",color:"#999"})]),e.createElementVNode("view",{class:"uni-date-changed--time-end"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(l.tempRange.after?l.tempRange.after:r.endDateText),1),e.createVNode(d,{type:"time",end:r.timepickerEndTime,modelValue:l.timeRange.endTime,"onUpdate:modelValue":i[7]||(i[7]=e=>l.timeRange.endTime=e),border:!1,"hide-second":s.hideSecond,disabled:!l.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):e.createCommentVNode("",!0),s.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[e.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:i[8]||(i[8]=(...e)=>r.confirm&&r.confirm(...e))},e.toDisplayString(r.confirmText),1)]))],2)):e.createCommentVNode("",!0)],32)}],["__scopeId","data-v-24c3b263"]]),TimePicker:U},data:()=>({isRange:!1,hasTime:!1,displayValue:"",inputDate:"",calendarDate:"",pickerTime:"",calendarRange:{startDate:"",startTime:"",endDate:"",endTime:""},displayRangeValue:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},pickerVisible:!1,pickerPositionStyle:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0,i18nT:()=>{}}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1},defaultValue:{type:[String,Object,Array],default:""}},watch:{type:{immediate:!0,handler(e){this.hasTime=-1!==e.indexOf("time"),this.isRange=-1!==e.indexOf("range")}},modelValue:{immediate:!0,handler(e){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e){e&&(this.calendarRange.startDate=V(e),this.hasTime&&(this.calendarRange.startTime=v(e)))}},end:{immediate:!0,handler(e){e&&(this.calendarRange.endDate=V(e),this.hasTime&&(this.calendarRange.endTime=v(e,this.hideSecond)))}}},computed:{timepickerStartTime(){return(this.isRange?this.tempRange.startDate:this.inputDate)===this.calendarRange.startDate?this.calendarRange.startTime:""},timepickerEndTime(){return(this.isRange?this.tempRange.endDate:this.inputDate)===this.calendarRange.endDate?this.calendarRange.endTime:""},mobileCalendarTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.pickerTime},mobSelectableTime(){return{start:this.calendarRange.startTime,end:this.calendarRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:this.selectDateTimeText)},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText(){return this.i18nT("uni-datetime-picker.selectDate")},selectDateTimeText(){return this.i18nT("uni-datetime-picker.selectDateTime")},selectTimeText(){return this.i18nT("uni-datetime-picker.selectTime")},startDateText(){return this.startPlaceholder||this.i18nT("uni-datetime-picker.startDate")},startTimeText(){return this.i18nT("uni-datetime-picker.startTime")},endDateText(){return this.endPlaceholder||this.i18nT("uni-datetime-picker.endDate")},endTimeText(){return this.i18nT("uni-datetime-picker.endTime")},okText(){return this.i18nT("uni-datetime-picker.ok")},clearText(){return this.i18nT("uni-datetime-picker.clear")},showClearIcon(){return this.clearIcon&&!this.disabled&&(this.displayValue||this.displayRangeValue.startDate&&this.displayRangeValue.endDate)}},created(){this.initI18nT(),this.platform()},methods:{initI18nT(){const e=z(H);this.i18nT=e.t},initPicker(e){if(!e&&!this.defaultValue||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,a]=e;if(!t&&!a)return;const i=V(t),s=v(t,this.hideSecond),n=V(a),o=v(a,this.hideSecond),l=i,r=n;this.displayRangeValue.startDate=this.tempRange.startDate=l,this.displayRangeValue.endDate=this.tempRange.endDate=r,this.hasTime&&(this.displayRangeValue.startDate=`${i} ${s}`,this.displayRangeValue.endDate=`${n} ${o}`,this.tempRange.startTime=s,this.tempRange.endTime=o);const c={before:i,after:n};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,c,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,c,{which:"left"})}else e?(this.displayValue=this.inputDate=this.calendarDate=V(e),this.hasTime&&(this.pickerTime=v(e,this.hideSecond),this.displayValue=`${this.displayValue} ${this.pickerTime}`)):this.defaultValue&&(this.inputDate=this.calendarDate=V(this.defaultValue),this.hasTime&&(this.pickerTime=v(this.defaultValue,this.hideSecond)))},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){if("undefined"!=typeof navigator)return void(this.isPhone=-1!==navigator.userAgent.toLowerCase().indexOf("mobile"));const{windowWidth:e}=uni.getSystemInfoSync();this.isPhone=e<=500,this.windowWidth=e},show(){if(this.$emit("show"),this.disabled)return;if(this.platform(),this.isPhone)return void setTimeout((()=>{this.$refs.mobile.open()}),0);this.pickerPositionStyle={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.pickerPositionStyle.right=0)})).exec(),setTimeout((()=>{if(this.pickerVisible=!this.pickerVisible,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.calendarRange;e&&t?this.diffDate(e,t)<30&&this.$refs.right.changeMonth("pre"):this.isPhone&&(this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.pickerVisible=!1,this.$emit("maskClick",this.value),this.$refs.mobile&&this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e),this.isEmitValue=!0},createTimestamp:e=>(e=C(e),Date.parse(new Date(e))),singleChange(e){this.calendarDate=this.inputDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){if(!x(this.inputDate)){const e=new Date;this.calendarDate=this.inputDate=V(e),this.pickerTime=v(e,this.hideSecond)}let e,t,a=!1;if(this.start){let i=this.start;"number"==typeof this.start&&(i=D(this.start,this.hideSecond)),[e,t]=i.split(" "),this.start&&!N(e,this.inputDate)&&(a=!0,this.inputDate=e)}let i,s,n=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=D(this.end,this.hideSecond)),[i,s]=e.split(" "),this.end&&!N(this.inputDate,i)&&(n=!0,this.inputDate=i)}this.hasTime?(a&&(this.pickerTime=t||S(this.hideSecond)),n&&(this.pickerTime=s||S(this.hideSecond)),this.pickerTime||(this.pickerTime=v(Date.now(),this.hideSecond)),this.displayValue=`${this.inputDate} ${this.pickerTime}`):this.displayValue=this.inputDate,this.setEmit(this.displayValue),this.pickerVisible=!1},leftChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,i),this.$emit("calendarClick",e)},rightChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const i={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,i),this.$emit("calendarClick",e)},mobileChange(e){if(this.isRange){const{before:t,after:a}=e.range;if(!t)return;if(this.handleStartAndEnd(t,a,!0),this.hasTime){const{startTime:t,endTime:a}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=a}this.confirmRangeChange()}else this.hasTime?this.displayValue=e.fulldate+" "+e.time:this.displayValue=e.fulldate,this.setEmit(this.displayValue);this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate||!this.tempRange.endDate)return void(this.pickerVisible=!1);let e,t;x(this.tempRange.startDate)||(this.tempRange.startDate=V(Date.now())),x(this.tempRange.endDate)||(this.tempRange.endDate=V(Date.now()));let a,i,s=!1,n=!1;if(this.start){let e=this.start;"number"==typeof this.start&&(e=D(this.start,this.hideSecond)),[a,i]=e.split(" "),this.start&&!N(this.start,this.tempRange.startDate)&&(s=!0,this.tempRange.startDate=a),this.start&&!N(this.start,this.tempRange.endDate)&&(n=!0,this.tempRange.endDate=a)}let o,l,r=!1,c=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=D(this.end,this.hideSecond)),[o,l]=e.split(" "),this.end&&!N(this.tempRange.startDate,this.end)&&(r=!0,this.tempRange.startDate=o),this.end&&!N(this.tempRange.endDate,this.end)&&(c=!0,this.tempRange.endDate=o)}this.hasTime?(s?this.tempRange.startTime=i||S(this.hideSecond):r&&(this.tempRange.startTime=l||S(this.hideSecond)),this.tempRange.startTime||(this.tempRange.startTime=v(Date.now(),this.hideSecond)),n?this.tempRange.endTime=i||S(this.hideSecond):c&&(this.tempRange.endTime=l||S(this.hideSecond)),this.tempRange.endTime||(this.tempRange.endTime=v(Date.now(),this.hideSecond)),e=this.displayRangeValue.startDate=`${this.tempRange.startDate} ${this.tempRange.startTime}`,t=this.displayRangeValue.endDate=`${this.tempRange.endDate} ${this.tempRange.endTime}`):(e=this.displayRangeValue.startDate=this.tempRange.startDate,t=this.displayRangeValue.endDate=this.tempRange.endDate),N(e,t)||([e,t]=[t,e]),this.displayRangeValue.startDate=e,this.displayRangeValue.endDate=t;const d=[e,t];this.setEmit(d),this.pickerVisible=!1},handleStartAndEnd(e,t,a=!1){if(!e)return;t||(t=e);const i=a?"tempRange":"range",s=N(e,t);this[i].startDate=s?e:t,this[i].endDate=s?t:e},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const a=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(a)},clear(e=!0){this.isRange?(this.displayRangeValue.startDate="",this.displayRangeValue.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.changeMonth("next")),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.displayValue="",this.inputDate="",this.pickerTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},calendarClick(e){this.$emit("calendarClick",e)}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n),d=e.resolveComponent("time-picker"),h=e.resolveComponent("Calendar");return e.openBlock(),e.createElementBlock("view",{class:"uni-date"},[e.createElementVNode("view",{class:"uni-date-editor",onClick:i[1]||(i[1]=(...e)=>r.show&&r.show(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":s.disabled,"uni-date-x--border":s.border}])},[l.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[e.createVNode(c,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(l.displayRangeValue.startDate||r.startPlaceholderText),1),e.createElementVNode("view",{class:"range-separator"},e.toDisplayString(s.rangeSeparator),1),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(l.displayRangeValue.endDate||r.endPlaceholderText),1)])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[e.createVNode(c,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input"},e.toDisplayString(l.displayValue||r.singlePlaceholderText),1)])),r.showClearIcon?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:i[0]||(i[0]=e.withModifiers(((...e)=>r.clear&&r.clear(...e)),["stop"]))},[e.createVNode(c,{type:"clear",color:"#c0c4cc",size:"22"})])):e.createCommentVNode("",!0)],2)]),!0)]),e.withDirectives(e.createElementVNode("view",{class:"uni-date-mask--pc",onClick:i[2]||(i[2]=(...e)=>r.close&&r.close(...e))},null,512),[[e.vShow,l.pickerVisible]]),l.isPhone?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[l.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-range--x",style:e.normalizeStyle(l.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[7]||(i[7]=e=>l.tempRange.startDate=e),placeholder:r.startDateText},null,8,["placeholder"]),[[e.vModelText,l.tempRange.startDate]]),e.createVNode(d,{type:"time",modelValue:l.tempRange.startTime,"onUpdate:modelValue":i[9]||(i[9]=e=>l.tempRange.startTime=e),start:r.timepickerStartTime,border:!1,disabled:!l.tempRange.startDate,hideSecond:s.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[8]||(i[8]=e=>l.tempRange.startTime=e),placeholder:r.startTimeText,disabled:!l.tempRange.startDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),e.createVNode(c,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[10]||(i[10]=e=>l.tempRange.endDate=e),placeholder:r.endDateText},null,8,["placeholder"]),[[e.vModelText,l.tempRange.endDate]]),e.createVNode(d,{type:"time",modelValue:l.tempRange.endTime,"onUpdate:modelValue":i[12]||(i[12]=e=>l.tempRange.endTime=e),end:r.timepickerEndTime,border:!1,disabled:!l.tempRange.endDate,hideSecond:s.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[11]||(i[11]=e=>l.tempRange.endTime=e),placeholder:r.endTimeText,disabled:!l.tempRange.endDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"popup-x-body"},[e.createVNode(h,{ref:"left",showMonth:!1,"start-date":l.calendarRange.startDate,"end-date":l.calendarRange.endDate,range:!0,pleStatus:l.endMultipleStatus,onChange:r.leftChange,onFirstEnterCale:r.updateRightCale,style:{padding:"0 8px"}},null,8,["start-date","end-date","pleStatus","onChange","onFirstEnterCale"]),e.createVNode(h,{ref:"right",showMonth:!1,"start-date":l.calendarRange.startDate,"end-date":l.calendarRange.endDate,range:!0,onChange:r.rightChange,pleStatus:l.startMultipleStatus,onFirstEnterCale:r.updateLeftCale,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale"])]),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{onClick:i[13]||(i[13]=(...e)=>r.clear&&r.clear(...e))},e.toDisplayString(r.clearText),1),e.createElementVNode("text",{class:"confirm-text",onClick:i[14]||(i[14]=(...e)=>r.confirmRangeChange&&r.confirmRangeChange(...e))},e.toDisplayString(r.okText),1)])):e.createCommentVNode("",!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-single--x",style:e.normalizeStyle(l.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":i[3]||(i[3]=e=>l.inputDate=e),placeholder:r.selectDateText},null,8,["placeholder"]),[[e.vModelText,l.inputDate]]),e.createVNode(d,{type:"time",modelValue:l.pickerTime,"onUpdate:modelValue":i[5]||(i[5]=e=>l.pickerTime=e),border:!1,disabled:!l.inputDate,start:r.timepickerStartTime,end:r.timepickerEndTime,hideSecond:s.hideSecond,style:{width:"100%"}},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":i[4]||(i[4]=e=>l.pickerTime=e),placeholder:r.selectTimeText,disabled:!l.inputDate},null,8,["placeholder","disabled"]),[[e.vModelText,l.pickerTime]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):e.createCommentVNode("",!0),e.createVNode(h,{ref:"pcSingle",showMonth:!1,"start-date":l.calendarRange.startDate,"end-date":l.calendarRange.endDate,date:l.calendarDate,onChange:r.singleChange,"default-value":s.defaultValue,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange","default-value"]),l.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"confirm-text",onClick:i[6]||(i[6]=(...e)=>r.confirmSingleChange&&r.confirmSingleChange(...e))},e.toDisplayString(r.okText),1)])):e.createCommentVNode("",!0)],4))],512)),[[e.vShow,l.pickerVisible]]),l.isPhone?(e.openBlock(),e.createBlock(h,{key:1,ref:"mobile",clearDate:!1,date:l.calendarDate,defTime:r.mobileCalendarTime,"start-date":l.calendarRange.startDate,"end-date":l.calendarRange.endDate,selectableTimes:r.mobSelectableTime,startPlaceholder:s.startPlaceholder,endPlaceholder:s.endPlaceholder,"default-value":s.defaultValue,pleStatus:l.endMultipleStatus,showMonth:!1,range:l.isRange,hasTime:l.hasTime,insert:!1,hideSecond:s.hideSecond,onConfirm:r.mobileChange,onMaskClose:r.close,onChange:r.calendarClick},null,8,["date","defTime","start-date","end-date","selectableTimes","startPlaceholder","endPlaceholder","default-value","pleStatus","range","hasTime","hideSecond","onConfirm","onMaskClose","onChange"])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-d07cfb0c"]]);const q=s({data:()=>({isEdit:!1,editDate:"",editIndex:-1,formData:{platform:"淘宝",name:"",price:"",time:"",checked:!1,date:(new Date).toISOString().split("T")[0]},platforms:["淘宝","京东","拼多多","抖音","唯品会","小红书","1688","其他"],taobao:h,jingdong:m,pinduoduo:u,douyin:p,weipinhui:g,xiaohongshu:f,alibaba:k,other:w}),onLoad(e){if("edit"===e.type){this.isEdit=!0;const e=uni.getStorageSync("editData");if(e){const t=JSON.parse(e);this.formData={...t.item},this.editDate=t.date,this.editIndex=t.index,uni.removeStorageSync("editData")}}else this.formData.time=this.getCurrentTime()},methods:{vibrateShort(){uni.vibrateShort({success:function(){t("log","at pages/packages/edit.vue:130","振动成功")}})},selectPlatform(e){this.formData.platform=e,this.vibrateShort()},getCurrentTime(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},getPlatformIcon(e){return{"淘宝":this.taobao,"京东":this.jingdong,"拼多多":this.pinduoduo,"抖音":this.douyin,"唯品会":this.weipinhui,"小红书":this.xiaohongshu,1688:this.alibaba,"其他":this.other}[e]||this.other},formatDate(e){const[t,a,i]=e.split("-");return`${t}年${parseInt(a)}月${parseInt(i)}日`},handleDateChange(e){this.formData.date=e,this.vibrateShort()},submitForm(){if(!this.formData.name)return void uni.showToast({title:"请输入商品名称",icon:"none"});const e=getCurrentPages(),a=e[e.length-2];a&&a.$vm.handlePackageSubmit({data:{platform:this.formData.platform,name:this.formData.name,price:this.formData.price,time:this.formData.time,checked:this.formData.checked,date:this.formData.date},isEdit:this.isEdit,editDate:this.editDate,editIndex:this.editIndex}),setTimeout((()=>{uni.navigateBack({delta:1,animationType:"slide-out-right",animationDuration:300,success:()=>{t("log","at pages/packages/edit.vue:201","返回成功")},fail:e=>{t("error","at pages/packages/edit.vue:204","返回失败:",e),uni.redirectTo({url:"/pages/packages/index",animationType:"slide-out-right",animationDuration:300})}})}),50)}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n),d=a(e.resolveDynamicComponent("uni-datetime-picker"),W);return e.openBlock(),e.createElementBlock("view",{class:"page-wrapper"},[e.createElementVNode("view",{class:"page-bg"}),e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"form-content"},[e.createElementVNode("view",{class:"platform-select"},[e.createElementVNode("text",{class:"label"},"选择平台"),e.createElementVNode("view",{class:"platform-cards"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.platforms,(t=>(e.openBlock(),e.createElementBlock("view",{key:t,class:e.normalizeClass(["platform-card",{active:l.formData.platform===t}]),onClick:e=>r.selectPlatform(t)},[e.createElementVNode("image",{class:"platform-icon",src:r.getPlatformIcon(t),mode:"aspectFit"},null,8,["src"]),e.createElementVNode("text",{class:"platform-name"},e.toDisplayString(t),1)],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"商品名称"),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":i[0]||(i[0]=e=>l.formData.name=e),placeholder:"请输入商品名称"},null,512),[[e.vModelText,l.formData.name]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"价格（选填）"),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":i[1]||(i[1]=e=>l.formData.price=e),type:"digit",placeholder:"请输入价格"},null,512),[[e.vModelText,l.formData.price]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"日期"),e.createVNode(d,{type:"date",modelValue:l.formData.date,"onUpdate:modelValue":i[2]||(i[2]=e=>l.formData.date=e),border:!1,onChange:r.handleDateChange},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"date-picker"},[e.createElementVNode("text",{class:"date-text"},e.toDisplayString(r.formatDate(l.formData.date)),1),e.createVNode(c,{type:"calendar",size:"16",color:"#666"})])])),_:1},8,["modelValue","onChange"])])]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("button",{class:"submit-btn",onClick:i[3]||(i[3]=(...e)=>r.submitForm&&r.submitForm(...e))},"确定")])])])}]]);class J{constructor(e,t){this.options=e,this.animation=uni.createAnimation({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let a=this.currentStepAnimates[this.next],i={};if(i=a||{styles:{},config:{}},G.includes(e)){i.styles.transform||(i.styles.transform="");let a="";"rotate"===e&&(a="deg"),i.styles.transform+=`${e}(${t+a}) `}else i.styles[e]=`${t}`;this.currentStepAnimates[this.next]=i}_animateRun(e={},t={}){let a=this.$.$refs.ani.ref;if(a)return new Promise(((i,s)=>{nvueAnimation.transition(a,{styles:e,...t},(e=>{i()}))}))}_nvueNextAnimate(e,t=0,a){let i=e[t];if(i){let{styles:s,config:n}=i;this._animateRun(s,n).then((()=>{t+=1,this._nvueNextAnimate(e,t,a)}))}else this.currentStepAnimates={},"function"==typeof a&&a(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const G=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function X(e,t){if(t)return clearTimeout(t.timer),new J(e,t)}G.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{J.prototype[e]=function(...t){return this.animation[e](...t),this}}));const Z=s({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let a in e){t+=this.toLine(a)+":"+e[a]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=X(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,a={}){if(this.animation){for(let a in e)try{"object"==typeof e[a]?this.animation[a](...e[a]):this.animation[a](e[a])}catch(i){t("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`方法 ${a} 不存在`)}return this.animation.step(a),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=X(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},a=(e,a)=>{"fade"===a?t.opacity=this.animationType(e)[a]:t.transform+=this.animationType(e)[a]+" "};return"string"==typeof this.modeClass?a(e,this.modeClass):this.modeClass.forEach((t=>{a(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let a=null;"fade"===t?a=e?0:1:(a=e?"-100%":"0","zoom-in"===t&&(a=e?.8:1),"zoom-out"===t&&(a=e?1.2:1),"slide-right"===t&&(a=e?"100%":"0"),"slide-bottom"===t&&(a=e?"100%":"0")),this.animation[this.animationMode()[t]](a)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((a=>{t(e,a)})),this.animation},animationType:e=>({fade:e?0:1,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,a,i,s,n,o){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{ref:"ani",animation:n.animationData,class:e.normalizeClass(i.customClass),style:e.normalizeStyle(o.transformStyles),onClick:a[0]||(a[0]=(...e)=>o.onClick&&o.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,n.isShow]])}]]);const K=s({name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:a,safeArea:i,screenHeight:s,safeAreaInsets:n}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(a||0),i&&this.safeArea?this.safeAreaInsets=n.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):t("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:298","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(t,i,s,n,o,l){const r=a(e.resolveDynamicComponent("uni-transition"),Z);return o.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[o.popupstyle,l.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:i[1]||(i[1]=(...e)=>l.touchstart&&l.touchstart(...e))},[o.maskShow?(e.openBlock(),e.createBlock(r,{key:"1",name:"mask","mode-class":"fade",styles:o.maskClass,duration:o.duration,show:o.showTrans,onClick:l.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(r,{key:"2","mode-class":o.ani,name:"content",styles:o.transClass,duration:o.duration,show:o.showTrans,onClick:l.onTap},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[o.popupstyle]]),style:e.normalizeStyle(l.getStyles),onClick:i[0]||(i[0]=(...e)=>l.clear&&l.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("",!0)}],["__scopeId","data-v-ee521468"]]);const Q=s({data:()=>({version:"1.0.0",stats:{total:0,picked:0}}),onLoad(e){this.getAppVersion()},onShow(){this.loadStats()},methods:{navigateTo(e){uni.navigateTo({url:e})},showSharePopup(){this.$refs.sharePopup.open()},closeSharePopup(){this.$refs.sharePopup.close()},handleAbout(){plus.runtime.openURL("https://gitee.com/szxio/pick-up-code-app")},getAppVersion(){try{this.version=plus.runtime.version}catch(e){t("error","at pages/my/index.vue:133","获取版本号失败:",e)}},loadStats(){try{const e=JSON.parse(uni.getStorageSync("packageCodes")||"[]");this.stats.total=e.length,this.stats.picked=e.filter((e=>e.isPicked)).length}catch(e){t("error","at pages/my/index.vue:151","加载统计数据失败:",e)}}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n),d=a(e.resolveDynamicComponent("uni-popup"),K);return e.openBlock(),e.createElementBlock("view",{class:"my-container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{class:"avatar",src:"/static/config-icons/mipmap-xxhdpi/ic_launcher.png",mode:"aspectFill"}),e.createElementVNode("text",{class:"nickname"},"快递取件助手"),e.createElementVNode("text",{class:"slogan"},"让取件更简单")])]),e.createElementVNode("view",{class:"stats-card"},[e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-value"},e.toDisplayString(l.stats.total),1),e.createElementVNode("text",{class:"stat-label"},"累计收到")]),e.createElementVNode("view",{class:"stat-divider"}),e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-value"},e.toDisplayString(l.stats.picked),1),e.createElementVNode("text",{class:"stat-label"},"累计取走")])]),e.createElementVNode("view",{class:"content-wrapper"},[e.createElementVNode("view",{class:"menu-list"},[e.createElementVNode("view",{class:"menu-item",onClick:i[0]||(i[0]=e=>r.navigateTo("/pages/my/match-rules"))},[e.createElementVNode("view",{class:"menu-left"},[e.createVNode(c,{type:"settings",size:"20",color:"#1673ff"}),e.createElementVNode("text",{class:"menu-text"},"匹配设置")]),e.createVNode(c,{type:"right",size:"16",color:"#999"})]),e.createElementVNode("view",{class:"menu-item",onClick:i[1]||(i[1]=e=>r.navigateTo("/pages/my/about"))},[e.createElementVNode("view",{class:"menu-left"},[e.createVNode(c,{type:"info",size:"20",color:"#1673ff"}),e.createElementVNode("text",{class:"menu-text"},"软件介绍")]),e.createVNode(c,{type:"right",size:"16",color:"#999"})]),e.createElementVNode("view",{class:"menu-item",onClick:i[2]||(i[2]=(...e)=>r.handleAbout&&r.handleAbout(...e))},[e.createElementVNode("view",{class:"menu-left"},[e.createVNode(c,{type:"upload",size:"20",color:"#1673ff"}),e.createElementVNode("text",{class:"menu-text"},"更新记录")]),e.createVNode(c,{type:"right",size:"16",color:"#999"})]),e.createElementVNode("view",{class:"menu-item",onClick:i[3]||(i[3]=e=>r.navigateTo("/pages/my/faq"))},[e.createElementVNode("view",{class:"menu-left"},[e.createVNode(c,{type:"help",size:"20",color:"#1673ff"}),e.createElementVNode("text",{class:"menu-text"},"常见问题")]),e.createVNode(c,{type:"right",size:"16",color:"#999"})]),e.createElementVNode("view",{class:"menu-item",onClick:i[4]||(i[4]=(...e)=>r.showSharePopup&&r.showSharePopup(...e))},[e.createElementVNode("view",{class:"menu-left"},[e.createVNode(c,{type:"redo",size:"20",color:"#1673ff"}),e.createElementVNode("text",{class:"menu-text"},"分享软件")]),e.createVNode(c,{type:"right",size:"16",color:"#999"})])]),e.createElementVNode("view",{class:"version"},[e.createElementVNode("text",null,"v"+e.toDisplayString(l.version),1)])]),e.createVNode(d,{ref:"sharePopup",type:"center"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"share-popup"},[e.createElementVNode("image",{class:"qrcode",src:"/static/images/searchCode.png",mode:"aspectFit"}),e.createElementVNode("text",{class:"share-tip"},"扫码下载最新版本"),e.createElementVNode("button",{class:"close-btn",onClick:i[5]||(i[5]=(...e)=>r.closeSharePopup&&r.closeSharePopup(...e))},"关闭")])])),_:1},512)])}]]);const ee=s({data:()=>({mode:"add",ruleId:"",ruleName:"",smsContent:"",rules:{code:{start:"",end:""},express:{start:"",end:""},address:{start:"",end:""}},matchResults:{code:"",express:"",address:""}}),onLoad(e){this.mode=e.mode||"add","edit"===this.mode&&e.id&&(this.ruleId=e.id,this.loadRule(e.id))},methods:{loadRule(e){const t=JSON.parse(uni.getStorageSync("matchRulesList")||"[]").find((t=>t.id===e));t&&(this.ruleName=t.name,this.rules=t.rules,this.smsContent=t.smsContent||"",this.$nextTick((()=>{this.updateMatchResults()})))},handleSmsInput(){this.updateMatchResults()},handleRuleChange(){this.updateMatchResults()},updateMatchResults(){this.smsContent?Object.keys(this.rules).forEach((e=>{const t=this.rules[e];if(t.start&&t.end){const a=this.smsContent.indexOf(t.start),i=this.smsContent.indexOf(t.end,a+t.start.length);this.matchResults[e]=-1!==a&&-1!==i?this.smsContent.substring(a+t.start.length,i).trim():""}else this.matchResults[e]=""})):this.matchResults={code:"",express:"",address:""}},handleSave(){if(!this.ruleName.trim())return void uni.showToast({title:"请输入规则名称",icon:"none"});const e=JSON.parse(uni.getStorageSync("matchRulesList")||"[]");if(e.some((e=>e.name===this.ruleName.trim()&&e.id!==this.ruleId)))return void uni.showToast({title:"规则名称已存在",icon:"none"});const t=Object.entries(this.rules).filter((([e,t])=>t.start&&t.end));if(0===t.length)return void uni.showToast({title:"请至少设置一个有效的匹配规则",icon:"none"});if(t.some((([e,t])=>!this.matchResults[e])))return void uni.showToast({title:"存在匹配失败的规则，请检查",icon:"none"});const a={id:"edit"===this.mode?this.ruleId:Date.now().toString(),name:this.ruleName,rules:this.rules,smsContent:this.smsContent,enabled:!0,createTime:(new Date).toLocaleString()};if("edit"===this.mode){const t=e.findIndex((e=>e.id===this.ruleId));-1!==t&&(e[t]=a)}else e.push(a);uni.setStorageSync("matchRulesList",JSON.stringify(e)),uni.showToast({title:"保存成功",icon:"success",complete:()=>{setTimeout((()=>{uni.navigateBack()}),1e3)}})}}},[["render",function(t,a,i,s,n,o){return e.openBlock(),e.createElementBlock("view",{class:"match-settings"},[e.createElementVNode("view",{class:"input-section"},[e.createElementVNode("text",{class:"section-title"},"规则名称"),e.withDirectives(e.createElementVNode("input",{class:"rule-name-input","onUpdate:modelValue":a[0]||(a[0]=e=>n.ruleName=e),placeholder:"请输入规则名称",type:"text"},null,512),[[e.vModelText,n.ruleName]])]),e.createElementVNode("view",{class:"input-section"},[e.createElementVNode("text",{class:"section-title"},"短信内容"),e.createElementVNode("text",{class:"section-desc"},"请输入完整的短信内容，然后设置匹配规则"),e.withDirectives(e.createElementVNode("textarea",{class:"sms-input","onUpdate:modelValue":a[1]||(a[1]=e=>n.smsContent=e),placeholder:"请输入完整的短信内容",maxlength:-1,onInput:a[2]||(a[2]=(...e)=>o.handleSmsInput&&o.handleSmsInput(...e))},null,544),[[e.vModelText,n.smsContent]])]),e.createElementVNode("view",{class:"rules-section"},[e.createElementVNode("view",{class:"rules-desc"},[e.createElementVNode("text",null,"设置规则说明："),e.createElementVNode("text",null,"1. 输入要匹配内容的前后文字"),e.createElementVNode("text",null,"2. 系统将自动提取这两段文字之间的内容"),e.createElementVNode("text",null,"3. 例如：取件码123456领取，可以输入 取件码 和 领取")]),e.createElementVNode("view",{class:"rule-item"},[e.createElementVNode("view",{class:"rule-header"},[e.createElementVNode("text",{class:"rule-title"},"取件码")]),e.createElementVNode("view",{class:"rule-content"},[e.createElementVNode("view",{class:"rule-inputs"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>n.rules.code.start=e),placeholder:"起始文字",onInput:a[4]||(a[4]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.code.start]]),e.createElementVNode("text",null,"至"),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>n.rules.code.end=e),placeholder:"结束文字",onInput:a[6]||(a[6]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.code.end]])]),n.rules.code.start&&n.rules.code.end?(e.openBlock(),e.createElementBlock("view",{key:0,class:"match-result"},[n.matchResults.code?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(" 匹配结果："),e.createElementVNode("text",{class:"result-text success"},e.toDisplayString(n.matchResults.code),1)],64)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"result-text error"},"匹配失败，请检查规则设置"))])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"rule-item"},[e.createElementVNode("view",{class:"rule-header"},[e.createElementVNode("text",{class:"rule-title"},"快递名称")]),e.createElementVNode("view",{class:"rule-content"},[e.createElementVNode("view",{class:"rule-inputs"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>n.rules.express.start=e),placeholder:"起始文字",onInput:a[8]||(a[8]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.express.start]]),e.createElementVNode("text",null,"至"),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=e=>n.rules.express.end=e),placeholder:"结束文字",onInput:a[10]||(a[10]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.express.end]])]),n.rules.express.start&&n.rules.express.end?(e.openBlock(),e.createElementBlock("view",{key:0,class:"match-result"},[n.matchResults.express?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(" 匹配结果："),e.createElementVNode("text",{class:"result-text success"},e.toDisplayString(n.matchResults.express),1)],64)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"result-text error"},"匹配失败，请检查规则设置"))])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"rule-item"},[e.createElementVNode("view",{class:"rule-header"},[e.createElementVNode("text",{class:"rule-title"},"地址")]),e.createElementVNode("view",{class:"rule-content"},[e.createElementVNode("view",{class:"rule-inputs"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=e=>n.rules.address.start=e),placeholder:"起始文字",onInput:a[12]||(a[12]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.address.start]]),e.createElementVNode("text",null,"至"),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[13]||(a[13]=e=>n.rules.address.end=e),placeholder:"结束文字",onInput:a[14]||(a[14]=(...e)=>o.handleRuleChange&&o.handleRuleChange(...e))},null,544),[[e.vModelText,n.rules.address.end]])]),n.rules.address.start&&n.rules.address.end?(e.openBlock(),e.createElementBlock("view",{key:0,class:"match-result"},[n.matchResults.address?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(" 匹配结果："),e.createElementVNode("text",{class:"result-text success"},e.toDisplayString(n.matchResults.address),1)],64)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"result-text error"},"匹配失败，请检查规则设置"))])):e.createCommentVNode("",!0)])])]),e.createElementVNode("view",{class:"btn-section"},[e.createElementVNode("button",{class:"save-btn",onClick:a[15]||(a[15]=(...e)=>o.handleSave&&o.handleSave(...e))},"保存设置")])])}]]);const te=s({data:()=>({rulesList:[],presetRules:[{name:"兔喜生活",desc:"适用于兔喜快递驿站的取件码匹配",smsContent:"【兔喜生活】您的中通快递包裹已到xx村xx学校往东200米路北兔喜生活，凭Y17-123来取，有问题联系159xxxx6637",rules:{code:{start:"凭",end:"来"},express:{start:"的",end:"包裹"},address:{start:"到",end:"，"}}},{name:"递管家模板1",desc:"适用于由递管家提供的快递柜取件码匹配",smsContent:"【递管家】您的邮政包裹已到xx小区18号楼超市旁，请凭取件码25363454到1号快递柜取件，咨询135xxxx347",rules:{code:{start:"取件码",end:"到"},express:{start:"的",end:"已到"},address:{start:"已到",end:"，"}}},{name:"递管家模板2",desc:"适用于由递管家提供的快递柜取件码匹配",smsContent:"【递管家】您的圆通速递已到xx小区18号楼超市旁，凭取件码60116553取，有问题联系135xxxx9347",rules:{code:{start:"取件码",end:"取"},express:{start:"的",end:"已到"},address:{start:"已到",end:"，"}}}]}),onShow(){this.loadRulesList()},methods:{formatDate(e){if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return e;return`${t.getFullYear()}年${String(t.getMonth()+1).padStart(2,"0")}月${String(t.getDate()).padStart(2,"0")}日`},handleStatusChange(e,t){const a=t.detail.value;this.rulesList[e].enabled=a,uni.setStorageSync("matchRulesList",JSON.stringify(this.rulesList)),uni.showToast({title:a?"规则已启用":"规则已禁用",icon:"none"})},loadRulesList(){const e=uni.getStorageSync("matchRulesList")||"[]",t=JSON.parse(e);this.rulesList=t.map((e=>({...e,enabled:void 0===e.enabled||e.enabled,createTime:this.formatDate(e.createTime)})))},handleAdd(){uni.navigateTo({url:"/pages/my/match-settings?mode=add"})},handleEdit(e){e.enabled?uni.navigateTo({url:`/pages/my/match-settings?mode=edit&id=${e.id}`}):uni.showToast({title:"请先启用该规则",icon:"none"})},handleDelete(e){uni.showModal({title:"提示",content:"确定要删除这条规则吗？",success:t=>{t.confirm&&(this.rulesList.splice(e,1),uni.setStorageSync("matchRulesList",JSON.stringify(this.rulesList)),uni.showToast({title:"删除成功",icon:"success"}))}})},showPresetRules(){this.$refs.presetPopup.open()},closePresetPopup(){this.$refs.presetPopup.close()},handleSelectPreset(e){if(this.rulesList.some((t=>t.name===e.name)))return void uni.showToast({title:`${e.name} 已存在`,icon:"none"});const t={id:Date.now().toString(),name:e.name,rules:e.rules,enabled:!0,smsContent:e.smsContent,createTime:this.formatDate(new Date)};this.rulesList.push(t),uni.setStorageSync("matchRulesList",JSON.stringify(this.rulesList)),this.closePresetPopup(),uni.showToast({title:"添加成功",icon:"success"})}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n),d=a(e.resolveDynamicComponent("uni-popup"),K);return e.openBlock(),e.createElementBlock("view",{class:"match-rules"},[e.createElementVNode("view",{class:"action-header"},[e.createElementVNode("button",{class:"preset-btn",onClick:i[0]||(i[0]=(...e)=>r.showPresetRules&&r.showPresetRules(...e))},[e.createVNode(c,{type:"download",size:"16",color:"#0052d9"}),e.createElementVNode("text",null,"使用预制规则")])]),l.rulesList.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"rules-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.rulesList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"rule-card",key:a},[e.createElementVNode("view",{class:"rule-info"},[e.createElementVNode("view",{class:"rule-header"},[e.createElementVNode("view",{class:"rule-name"},e.toDisplayString(t.name),1),e.createElementVNode("switch",{checked:t.enabled,onChange:e=>r.handleStatusChange(a,e),color:"#0052d9"},null,40,["checked","onChange"])]),e.createElementVNode("view",{class:"rule-time"},"添加时间 "+e.toDisplayString(t.createTime),1)]),e.createElementVNode("view",{class:"rule-actions"},[e.createElementVNode("view",{class:"action-btn edit",onClick:e=>r.handleEdit(t)},[e.createVNode(c,{type:"compose",size:"18",color:"#0052d9"}),e.createElementVNode("text",null,"编辑")],8,["onClick"]),e.createElementVNode("view",{class:"action-btn delete",onClick:e=>r.handleDelete(a)},[e.createVNode(c,{type:"trash",size:"18",color:"#ff4d4f"}),e.createElementVNode("text",null,"删除")],8,["onClick"])])])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-state"},[e.createElementVNode("image",{src:"/static/images/empty.png",mode:"aspectFit"}),e.createElementVNode("text",null,"暂无匹配规则")])),e.createElementVNode("button",{class:"add-btn",onClick:i[1]||(i[1]=(...e)=>r.handleAdd&&r.handleAdd(...e))},[e.createVNode(c,{type:"plusempty",size:"18",color:"#fff"}),e.createElementVNode("text",null,"添加规则")]),e.createVNode(d,{ref:"presetPopup",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"preset-popup"},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("text",{class:"popup-title"},"选择预制规则"),e.createElementVNode("text",{class:"popup-desc"},"选择常用快递公司的匹配规则")]),e.createElementVNode("scroll-view",{class:"preset-list","scroll-y":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.presetRules,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"preset-item",key:a,onClick:e=>r.handleSelectPreset(t)},[e.createElementVNode("view",{class:"preset-info"},[e.createElementVNode("text",{class:"preset-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"preset-desc"},e.toDisplayString(t.desc),1)]),e.createVNode(c,{type:"right",size:"16",color:"#999"})],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"popup-footer"},[e.createElementVNode("button",{class:"close-btn",onClick:i[2]||(i[2]=(...e)=>r.closePresetPopup&&r.closePresetPopup(...e))},"关闭")])])])),_:1},512)])}]]);const ae=s({},[["render",function(t,a){return e.openBlock(),e.createElementBlock("view",{class:"faq-container"},[e.createElementVNode("view",{class:"faq-list"},[e.createElementVNode("view",{class:"faq-item"},[e.createElementVNode("view",{class:"question"},[e.createElementVNode("text",null,"为什么要获取短信授权？")]),e.createElementVNode("view",{class:"answer"},[e.createElementVNode("text",null,"为了实现自动提取取件码的功能，应用需要读取您的短信内容。请放心："),e.createElementVNode("text",null,'1. 应用仅在您主动点击"自动匹配"时才会读取短信'),e.createElementVNode("text",null,"2. 短信内容仅在本地用于提取取件码，不会上传到任何服务器"),e.createElementVNode("text",null,"3. 应用不会修改或删除您的任何短信"),e.createElementVNode("text",null,"4. 您可以随时在系统设置中关闭短信权限")])]),e.createElementVNode("view",{class:"faq-item"},[e.createElementVNode("view",{class:"question"},[e.createElementVNode("text",null,"为什么点击自动匹配没有效果？")]),e.createElementVNode("view",{class:"answer"},[e.createElementVNode("text",null,"可能有以下几个原因："),e.createElementVNode("text",null,'1. 没有添加匹配规则：请先在"匹配设置"中添加并启用至少一条规则'),e.createElementVNode("text",null,"2. 权限问题：请确保在系统设置中允许应用访问短信"),e.createElementVNode("text",null,"3. 设备限制：iOS设备因系统限制，无法读取短信内容"),e.createElementVNode("text",null,'4. 短信权限：某些手机（如小米）需要额外开启"通知类短信"权限')])]),e.createElementVNode("view",{class:"faq-item"},[e.createElementVNode("view",{class:"question"},[e.createElementVNode("text",null,"为什么自动匹配出来的内容不全？")]),e.createElementVNode("view",{class:"answer"},[e.createElementVNode("text",null,"这个问题通常可以通过以下方式解决："),e.createElementVNode("text",null,'1. 检查匹配规则是否正确：在"匹配设置"中确认起始和结束文字是否与短信内容完全一致'),e.createElementVNode("text",null,"2. 测试规则：在添加或编辑规则时，可以粘贴完整短信内容进行测试"),e.createElementVNode("text",null,'3. 权限问题：如果使用小米手机，请确保在系统设置中开启了"通知类短信"权限'),e.createElementVNode("text",null,"4. 多条规则：如果一条规则无法完全匹配，可以添加多条规则来适应不同格式的短信")])])])])}]]);const ie=s({methods:{handleGithub(){plus.runtime.openURL("https://gitee.com/szxio/pick-up-code-app")}}},[["render",function(t,i,s,o,l,r){const c=a(e.resolveDynamicComponent("uni-icons"),n);return e.openBlock(),e.createElementBlock("view",{class:"about-container"},[e.createElementVNode("view",{class:"about-content"},[e.createElementVNode("text",{class:"title"},"快递取件助手"),e.createElementVNode("text",{class:"desc"},"快递取件助手是一款专注于快递取件场景的实用工具。它能够自动识别并提取快递短信中的取件码，让您不再需要手动复制粘贴或记忆繁琐的取件码。"),e.createElementVNode("text",{class:"subtitle"},"主要特点："),e.createElementVNode("view",{class:"features"},[e.createElementVNode("text",null,"1. 智能提取：一键从短信中提取取件码、快递公司和取件地点等信息"),e.createElementVNode("text",null,"2. 自定义规则：支持添加和编辑匹配规则，适应不同快递公司的短信格式"),e.createElementVNode("text",null,"3. 历史记录：自动记录所有取件码，并标记已取和未取状态"),e.createElementVNode("text",null,"4. 隐私保护：所有数据存储在本地，不会上传服务器，充分保护您的隐私"),e.createElementVNode("text",null,"5. 简洁界面：采用清新简约的设计风格，操作直观便捷")]),e.createElementVNode("text",{class:"desc"},"无论是在快递柜、自提点，还是快递驿站取件，这款应用都能帮您快速找到取件码。它特别适合经常网购的用户，能够有效节省找码时间，让取件过程更加轻松愉快。"),e.createElementVNode("text",{class:"desc"},"开源免费，无广告，无需注册，安装即用。让每一次取件都变得简单高效。"),e.createElementVNode("button",{class:"github-btn",onClick:i[0]||(i[0]=(...e)=>r.handleGithub&&r.handleGithub(...e))},[e.createVNode(c,{type:"github",size:"20",color:"#333"}),e.createElementVNode("text",null,"查看源码")])])])}]]);const se=s({},[["render",function(t,a){return e.openBlock(),e.createElementBlock("view",{class:"changelog-container"},[e.createElementVNode("view",{class:"version-list"},[e.createElementVNode("view",{class:"version-item"},[e.createElementVNode("view",{class:"version-header"},[e.createElementVNode("text",{class:"version-name"},"v1.0.1"),e.createElementVNode("text",{class:"version-date"},"2024-03-21")]),e.createElementVNode("view",{class:"update-list"},[e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"添加预制匹配规则功能")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"添加软件介绍和更新记录")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag optimize"},"优化"),e.createElementVNode("text",{class:"content"},"优化取件码列表显示效果")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag fix"},"修复"),e.createElementVNode("text",{class:"content"},"修复部分机型无法正确读取短信的问题")])])]),e.createElementVNode("view",{class:"version-item"},[e.createElementVNode("view",{class:"version-header"},[e.createElementVNode("text",{class:"version-name"},"v1.0.0"),e.createElementVNode("text",{class:"version-date"},"2024-03-20")]),e.createElementVNode("view",{class:"update-list"},[e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"首次发布")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"支持自定义匹配规则")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"支持自动读取短信提取取件码")]),e.createElementVNode("view",{class:"update-item"},[e.createElementVNode("text",{class:"tag feature"},"新增"),e.createElementVNode("text",{class:"content"},"支持取件码历史记录管理")])])])])])}]]);__definePage("pages/index/index",d),__definePage("pages/packages/index",y),__definePage("pages/packages/edit",q),__definePage("pages/my/index",Q),__definePage("pages/my/match-settings",ee),__definePage("pages/my/match-rules",te),__definePage("pages/my/faq",ae),__definePage("pages/my/about",ie),__definePage("pages/my/changelog",se);const ne={onLaunch:function(){t("warn","at App.vue:4","当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！"),t("log","at App.vue:5","App Launch")},onShow:function(){t("log","at App.vue:8","App Show")},onHide:function(){t("log","at App.vue:11","App Hide")}};const{app:oe,Vuex:le,Pinia:re}={app:e.createVueApp(ne)};uni.Vuex=le,uni.Pinia=re,oe.provide("__globalStyles",__uniConfig.styles),oe._component.mpType="app",oe._component.render=()=>{},oe.mount("#app")}(Vue);
